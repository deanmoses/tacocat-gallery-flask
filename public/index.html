<!doctype html>
<html>
<head>
    <script src="dropzone/dropzone.js"></script>
    <link rel="stylesheet" type="text/css" href="dropzone/css/basic.css"/>
    <link rel="stylesheet" type="text/css" href="dropzone/css/dropzone.css"/>
</head>
<div id="tacozone" class="dropzone"></div>
<script>
    Dropzone.options.tacozone = {
        url: "/upload",
        paramName: "file", // The name that will be used to transfer the file
        maxFilesize: 15, // MB
        acceptedFiles: ".jpg,.JPG,.jpeg,.JPEG,.png,.PNG", // there's a pending commit to dropzone to make it case-insensitive
        accept: function (file, done) {
            var err = validateFilename(file.name);
            if (err) {
                done(err);
            }
            else {
                done();
            }
        }
    };

    /**
     * If filename isn't valid for upload,
     * return message saying why.
     */
    function validateFilename(filename) {
        if (!/^[a-zA-Z0-9_\-\.]+$/.test(filename)) {
            return "Filename can only contain numbers, letters, and (_-.)"
        }
        return undefined;
    }
</script>
</html>